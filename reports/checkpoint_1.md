# Отчет Checkpoint №1: Данные проекта WindChaserSecurity

## 1. Типы необходимых данных

### 1.1. Схема заданий (Course DB)
- **Источник**: Задания собраны совместно с преподавателями курса LLM Security
- **Содержание**: Данные о курсах, студентах, заданиях (Theory & Practice), результатах выполнения заданий
- **Процесс получения**: Данные создаются администраторами через FastAPI backend, сохраняются в PostgreSQL (схема Course DB) через SQLAlchemy ORM, доступ через REST API. 
- **Доступ**: Через FastAPI backend (`DATABASE_URL` в переменных окружения)
- **Использование**: 
  - Агент-оценщик (`EvaluatorAgent`) - валидация решений студентов
  - Агент-тьютор (`TutorAgent`) - предоставление помощи студентам

### 1.2. База с теорией (Knowledge Base)
- **Источник**: Теоретические данные собраны совместно с преподавателями курса LLM Security.
- **Содержание**: Теоретический материал по безопасности RAG-систем и LLM, материалы по модулю "Атаки" (извлечение системного промпта, извлечение секрета из базы знаний, обход ограничения токенов)
- **Процесс получения**: Теоретический материал планируется к размещению в базе знаний, доступ через функции `get_theory_content()` и `get_knowledge_base_secrets()`. 
Текущая реализация использует статические данные и LLM для генерации контекста. 
- **Текущий статус**: В коде есть заглушки с комментариями TODO, функции запланированы к реализации
- **Доступ**: Планируется через модуль `agents/evaluator/context.py` или `agents/tutor/context.py`
- **Использование**: 
  - Агент-тьютор - предоставление контекста студентам (инструмент `provide_theory_context`)
  - Агент-оценщик - более качественная обратная связь по выполнению задания

### 1.3. Данные школы кайтсерфинга (RAG-симулятор)
- **Источник**: Данные сгенерированы для симулятора курса. Формат данных определен участниками проекта.
- **Содержание**: Специфичные данные для чат-бота WindChaser, информация о школе кайтсерфинга "WindChaser", данные для RAG-симулятора (база знаний чат-бота)
- **Процесс получения**: Данные структурированы в PostgreSQL (схема Kiteboarding Schema), используются для создания базы знаний RAG-симулятора. Chunking выполняется на уровне LangFlow при создании векторной базы знаний.
- **Доступ**: Через PostgreSQL базу данных
- **Использование**: 
  - LangFlow flows для создания RAG-симулятора
  - Практика студентов на реальном чат-боте клуба по кайтсёрфингу
  - Задания по извлечению секретов из базы знаний

## 2. Сбор и структура данных

### Данные сохранены в едином хранилище

**PostgreSQL база данных** (Docker контейнер `windchasersecurity-postgres`, версия PostgreSQL 16):
- **Схемы**: Course DB (курсы, студенты, задания), Langflow DB (пользователи, flows, сообщения), Kiteboarding Schema (данные для чат-бота)
- **Подключение**: `postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}` (переменные `DATABASE_URL` и `LANGFLOW_DATABASE_URL`)
- **Персистентность**: Docker volume `postgres:/var/lib/postgresql/data`

**Структура PostgreSQL базы данных**:
```
PostgreSQL Database
├── Course DB (схема)
│   ├── Курсы
│   ├── Студенты
│   ├── Задания (Theory & Practice)
│   └── Результаты выполнения заданий
├── Langflow DB (схема)
│   ├── Пользователи LangFlow
│   ├── Flows
│   └── Сообщения LangFlow
└── Kiteboarding Schema (схема)
    └── Данные для чат-бота WindChaser (RAG-симулятор)
```

**MinIO** (S3-совместимое хранилище, Docker контейнер `windchasersecurity-minio`):
- **Назначение**: Хранение файлов (отчёты о безопасности, логи атак и защит, пользовательские данные, сообщения и flows)
- **Подключение**: Endpoint `minio:9000`, Bucket `${MINIO_BUCKET_NAME:-windchasersecurity}`
- **Персистентность**: Docker volume `minio-data:/data`

**Дополнительные volumes**: `backend-data:/app/data` (данные backend), `langflow-data:/app/langflow` (данные LangFlow)

**Структура MinIO хранилища**:
```
MinIO Bucket: windchasersecurity
├── Отчёты о безопасности
├── Логи атак и защит
├── Пользовательские данные
└── Сообщения и flows
```

### Все необходимые данные собраны

✅ **Схема заданий (Course DB)**: Данные структурированы и хранятся в PostgreSQL (таблицы для курсов, студентов, заданий, доступ через SQLAlchemy ORM)

✅ **Данные школы кайтсерфинга (Kiteboarding Schema)**: Данные подготовлены для использования в RAG-симуляторе (схема определена в PostgreSQL, используются в LangFlow flows)

⚠️ **База с теорией**: В процессе интеграции (структура данных определена, функции доступа запланированы к реализации)

## 3. Подготовка для RAG и агентов

**Для RAG-симулятора**:
- Данные школы кайтсерфинга структурированы в PostgreSQL (Kiteboarding Schema)
- Используются в LangFlow flows через стандартные узлы LangFlow
- **Chunking выполняется на уровне LangFlow** при создании векторной базы знаний
- Каждый студент получает индивидуальный flow с чат-ботом

Данные хранятся в PostgreSQL → при создании flow в LangFlow извлекаются и обрабатываются → LangFlow выполняет chunking и создание векторных представлений → векторная база знаний используется для поиска

**Для агентов**:
- Схема заданий структурирована в PostgreSQL (Course DB), доступна через SQLAlchemy ORM, используется через API backend
- Теоретический материал: планируется структурирование в базе знаний, будет доступен через функции `get_theory_content()` и `get_knowledge_base_secrets()`. Текущая реализация использует статические данные и LLM для генерации контекста

Данные о заданиях в PostgreSQL → Backend предоставляет REST API → Агенты получают данные через HTTP запросы → Используются для валидации решений студентов, предоставления помощи, анализа этапа работы

## 4. Документация

✅ **Основной README** (`README.md`): Описание проекта, компонентов системы, инструкции по быстрому старту, информация о базе данных и хранилищах

✅ **Документация агентов**:
- `README.md` - документация агента-оценщика
- `docs\AGENT_ARCHITECTURE.md` - архитектура агентов

✅ **Спецификации инструментов**:
- `\docs\ev_tools_specification.md` - спецификация инструментов оценщика
- `\docs\tut_tools_specification.md` - спецификация инструментов тьютора


### Доступ к данным:
- **Для агентов**: Схема заданий через FastAPI backend (`DATABASE_URL`), база знаний планируется через модуль `agents/evaluator/context.py` или `agents/tutor/context.py`
- **Для RAG-симулятора**: Данные школы кайтсерфинга через PostgreSQL (Kiteboarding Schema), использование в LangFlow flows через стандартные узлы

### Сэмпл данных

**Ссылка на папку с сэмплом собранных данных**

 Папка `/dataset/` 

**Для просмотра реальных данных**: 

инструкция

### Объём данных

**PostgreSQL база данных**:
- **Course DB**: 
- **Langflow DB**: 
- **Kiteboarding Schema**: 

**MinIO хранилище**: Отчёты и логи создаются динамически при работе системы, объём зависит от активности студентов и количества выполненных заданий


